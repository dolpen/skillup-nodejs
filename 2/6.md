---
layout: default
title: STEP2-6.MongoDBをインストールして使ってみる
---
# STEP2-6.MongoDBをインストールして使ってみる

### MongoDBとは
ドキュメント思考データベースと呼ばれるデータベースです。
一般的に使われるMySQLと違い、扱うデータを定義する必要がない（スキーマレス）ので構造化されたデータの扱いに長けています。

### MongoDBをインストールする
MongoDBの[ダウンロードページ](http://www.mongodb.org/downloads)からダウンロードします。
Windowsへのインストールは[Windowsにmongodbをインストール](http://kakakikikeke.blogspot.jp/2014/02/windowsmongodb.html)を参考にしてください。
mongod.exeを実行してMongoDBサーバを起動し、mongo.exeを実行することで起動しているサーバに接続できるはずです。

常にサーバを起動するためにはサービスとして登録する必要があります。
Windowsでのサービス登録は[WindowsでMongoDBを使えるようにする](http://totora0155.hatenablog.jp/entry/2013/07/13/032129)を参考にしてください。
管理者権限でコマンドプロンプトを実行する必要がありますが、サービスを開始することで毎回MongoDBサーバを起動しなくてもよくなります。

### MongoDBを使ってみる

MongoDBの使い方は[使ってみようMongoDB](http://gihyo.jp/dev/serial/01/mongodb/0001?page=3)や[MongoDBのクエリを使いこなそう](http://gihyo.jp/dev/serial/01/mongodb/0003?page=1)が参考になります。

MondoDBでは[クエリ](http://e-words.jp/w/E382AFE382A8E383AAE383BC.html)を書いてデータベースの操作を行います。

```
db.users.insert(
  {
      name : 'のび太',
       age : 25,
       tag : ['man', 'megane', 'anime']
  }
)

// usersをすべて検索する
db.users.find()
```
以上のようにMongoクエリを実行すると、usersコレクションという集合に名前はのび太、年齢は25、特徴はman,megane,animeというデータが保存されているはずです。
JavaScriptで使ったJSONの形式でデータを保存することができます。

```
for (var i = 1; i <= 10; i++) {
  db.testData.insert(
    // 0~100のデータをランダムに追加
    { x : Math.ceil( Math.random() * 100 ) }
  )
}

// 全データ数を数える
db.testData.count()

// xが50より大きいデータ数を数える
db.testData.count( { x : { $gt : 50 }} )

// xが50より大きいデータ数を検索
db.testData.find( { x : { $gt : 50 }} )

// xが10より小さいデータを削除
db.testData.remove({ x : {$lt : 10} })
```
以上のように、MongoクエリでJavaScriptを実行することもできます。
また条件をつけてデータを数えたり検索、削除することができます。
